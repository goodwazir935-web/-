&lt;!DOCTYPE html&gt;<br/>&lt;html lang=&quot;ar&quot;&gt;<br/>&lt;head&gt;<br/>&lt;meta charset=&quot;UTF-8&quot;&gt;<br/>&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;<br/>&lt;title&gt;تطبيق حجز تذاكر الباصات&lt;/title&gt;<br/>&lt;style&gt;<br/>body { font-family: Arial; direction: rtl; background: #f0f2f5; margin:0; padding:20px; }<br/>h1 { text-align: center; }<br/>.container { max-width: 950px; margin:auto; background:#fff; padding:20px; border-radius:10px; box-shadow:0 0 15px rgba(0,0,0,0.1);}<br/>.flight-card { border-radius:10px; padding:15px; margin-bottom:15px; color:#fff; display:flex; justify-content:space-between; align-items:center; transition: transform 0.2s;}<br/>.flight-card:hover { transform:scale(1.02);}<br/>.flight-card button { padding:10px 15px; border:none; border-radius:5px; cursor:pointer; font-weight:bold;}<br/>.flight-card.jeddah { background:#1E90FF; }<br/>.flight-card.makkah { background:#FF8C00; }<br/>.flight-card.madina { background:#32CD32; }<br/>#seats { margin-top:25px; }<br/>.seat { display:inline-block; width:50px; height:50px; line-height:50px; margin:3px; text-align:center; border-radius:8px; font-size:14px; cursor:pointer; transition:all 0.2s; }<br/>.seat.available { background:#ccc; }<br/>.seat.available:hover { background:#a0a0a0; transform:scale(1.2);}<br/>.seat.selected { background:#4CAF50; color:#fff;}<br/>.seat.selected:hover { box-shadow:0 0 10px #4CAF50; transform:scale(1.2);}<br/>.seat.booked { background:#f44336; color:#fff; cursor:not-allowed; }<br/>.aisle { display:inline-block; width:30px; }<br/>.passenger { margin-bottom:10px; }<br/>input, button { padding:10px; margin-top:10px; width:100%; box-sizing:border-box; }<br/>#bookings { margin-top:20px; }<br/>#bookings button { margin-bottom:10px; cursor:pointer; }<br/>&lt;/style&gt;<br/>&lt;/head&gt;<br/>&lt;body&gt;<br/>&lt;div class=&quot;container&quot;&gt;<br/>&lt;h1&gt;نظام حجز تذاكر الباصات&lt;/h1&gt;<br/>&lt;h3&gt;الرحلات المتاحة&lt;/h3&gt;<br/>&lt;div id=&quot;flights&quot;&gt;&lt;/div&gt;<br/>&lt;div id=&quot;seats&quot; style=&quot;display:none;&quot;&gt;<br/>&lt;h3&gt;اختر مقاعد المسافرين&lt;/h3&gt;<br/>&lt;div id=&quot;passenger-list&quot;&gt;&lt;/div&gt;<br/>&lt;div id=&quot;seat-map&quot;&gt;&lt;/div&gt;<br/>&lt;button onclick=&quot;confirmBooking()&quot;&gt;تأكيد الحجز&lt;/button&gt;<br/>&lt;/div&gt;<br/>&lt;div id=&quot;bookings&quot;&gt;<br/>&lt;h3&gt;كشف الركاب&lt;/h3&gt;<br/>&lt;button onclick=&quot;printBookings()&quot;&gt;طباعة كشف الركاب&lt;/button&gt;<br/>&lt;ul id=&quot;booking-list&quot;&gt;&lt;/ul&gt;<br/>&lt;/div&gt;<br/>&lt;script&gt;<br/>const flights = [<br/>  {id:1, from:&quot;جدة&quot;, to:&quot;مكة&quot;, time:&quot;10:00&quot;, price:100, color:&quot;jeddah&quot;},<br/>  {id:2, from:&quot;مكة&quot;, to:&quot;المدينة&quot;, time:&quot;12:00&quot;, price:150, color:&quot;makkah&quot;},<br/>  {id:3, from:&quot;المدينة&quot;, to:&quot;الرياض&quot;, time:&quot;15:00&quot;, price:200, color:&quot;madina&quot;}<br/>];<br/>let selectedFlight=null, selectedSeats={}, passengerNames=[], agentNames=[], bookings=[], seatStatus={};<br/>if(localStorage.getItem(&#39;bookings&#39;)){<br/>  bookings=JSON.parse(localStorage.getItem(&#39;bookings&#39;));<br/>  bookings.forEach(b=&gt;{ if(!seatStatus[b.flight.id]) seatStatus[b.flight.id]=new Set(); seatStatus[b.flight.id].add(b.seat); });<br/>  renderBookings();<br/>}<br/>function renderFlights(){<br/>  const container=document.getElementById(&#39;flights&#39;); container.innerHTML=&#39;&#39;;<br/>  flights.forEach(f=&gt;{<br/>    const card=document.createElement(&#39;div&#39;); card.className=`flight-card ${f.color}`;<br/>    card.innerHTML=`&lt;div&gt;&lt;strong&gt;${f.from} → ${f.to}&lt;/strong&gt;&lt;br&gt;الوقت: ${f.time} | السعر: ${f.price} ريال&lt;/div&gt;<br/>    &lt;button onclick=&quot;selectFlight(${f.id})&quot;&gt;اختر الرحلة&lt;/button&gt;`;<br/>    container.appendChild(card);<br/>  });<br/>}<br/>function selectFlight(id){<br/>  selectedFlight=flights.find(f=&gt;f.id===id);<br/>  selectedSeats={}; passengerNames=[]; agentNames=[];<br/>  if(!seatStatus[selectedFlight.id]) seatStatus[selectedFlight.id]=new Set();<br/>  renderPassengerInputs(); renderSeats();<br/>  document.getElementById(&#39;seats&#39;).style.display=&#39;block&#39;;<br/>}<br/>function renderPassengerInputs(){<br/>  const container=document.getElementById(&#39;passenger-list&#39;); container.innerHTML=&#39;&#39;;<br/>  let inputCount=prompt(&quot;كم عدد المسافرين؟ (حتى 49)&quot;); inputCount=Math.min(inputCount,49);<br/>  for(let i=0;i&lt;inputCount;i++){<br/>    const div=document.createElement(&#39;div&#39;); div.className=&#39;passenger&#39;;<br/>    div.innerHTML=`مسافر ${i+1}: &lt;input type=&quot;text&quot; placeholder=&quot;اسم المسافر&quot; data-index=&quot;${i}&quot; oninput=&quot;updatePassengerName(this)&quot;&gt; | وكيل: &lt;input type=&quot;text&quot; placeholder=&quot;اسم الوكيل&quot; data-index=&quot;${i}&quot; oninput=&quot;updateAgentName(this)&quot;&gt; &lt;span id=&quot;selected-seat-${i}&quot;&gt;&lt;/span&gt;`;<br/>    container.appendChild(div);<br/>    passengerNames.push(&quot;&quot;); agentNames.push(&quot;&quot;);<br/>  }<br/>}<br/>function updatePassengerName(input){ passengerNames[parseInt(input.dataset.index)]=input.value.trim();}<br/>function updateAgentName(input){ agentNames[parseInt(input.dataset.index)]=input.value.trim();}<br/>function renderSeats(){<br/>  const seatMap=document.getElementById(&#39;seat-map&#39;); seatMap.innerHTML=&#39;&#39;;<br/>  const rows=7, seatsPerSide=3, rowLetters=[&#39;A&#39;,&#39;B&#39;,&#39;C&#39;,&#39;D&#39;,&#39;E&#39;,&#39;F&#39;,&#39;G&#39;];<br/>  for(let r=0;r&lt;rows;r++){<br/>    for(let s=1;s&lt;=seatsPerSide;s++){<br/>      const seatId=rowLetters[r]+s, seat=document.createElement(&#39;div&#39;);<br/>      seat.className=seatStatus[selectedFlight.id].has(seatId)?&#39;seat booked&#39;:&#39;seat available&#39;;<br/>      seat.title=seatId; seat.textContent=seatId;<br/>      seat.onclick=()=&gt;selectSeat(seat,seatId);<br/>      seatMap.appendChild(seat);<br/>    }<br/>    const aisle=document.createElement(&#39;div&#39;); aisle.className=&#39;aisle&#39;; seatMap.appendChild(aisle);<br/>    for(let s=1;s&lt;=seatsPerSide;s++){<br/>      const seatId=rowLetters[r]+(s+seatsPerSide), seat=document.createElement(&#39;div&#39;);<br/>      seat.className=seatStatus[selectedFlight.id].has(seatId)?&#39;seat booked&#39;:&#39;seat available&#39;;<br/>      seat.title=seatId; seat.textContent=seatId;<br/>      seat.onclick=()=&gt;selectSeat(seat,seatId);<br/>      seatMap.appendChild(seat);<br/>    }<br/>    seatMap.appendChild(document.createElement(&#39;br&#39;));<br/>  }<br/>}<br/>function selectSeat(seatDiv, seatId){<br/>  if(seatStatus[selectedFlight.id].has(seatId)){ alert(&quot;هذا المقعد محجوز مسبقًا!&quot;); return;}<br/>  for(let key in selectedSeats) if(selectedSeats[key]===seatId){ alert(&quot;هذا المقعد مختار لمسافر آخر!&quot;); return;}<br/>  const passengerIndex=passengerNames.findIndex((n,idx)=&gt;n &amp;&amp; !selectedSeats[idx]);<br/>  if(passengerIndex===-1){ alert(&quot;يرجى إدخال جميع الأسماء أولاً&quot;); return;}<br/>  selectedSeats[passengerIndex]=seatId;<br/>  document.getElementById(`selected-seat-${passengerIndex}`).textContent=` | المقعد: ${seatId}`;<br/>  seatDiv.classList.add(&#39;selected&#39;);<br/>}<br/>function confirmBooking(){<br/>  for(let i=0;i&lt;passengerNames.length;i++){<br/>    const name=passengerNames[i], seat=selectedSeats[i], agent=agentNames[i]||&#39;&#39;;<br/>    if(!name||!seat){ alert(&quot;الرجاء إدخال جميع الأسماء واختيار المقاعد&quot;); return;}<br/>    bookings.push({flight:selectedFlight, seat, name, agent});<br/>    seatStatus[selectedFlight.id].add(seat);<br/>  }<br/>  localStorage.setItem(&#39;bookings&#39;, JSON.stringify(bookings));<br/>  alert(&quot;تم الحجز بنجاح!&quot;);<br/>  selectedSeats={}; passengerNames=[]; agentNames=[];<br/>  renderBookings(); renderPassengerInputs(); renderSeats();<br/>}<br/>function renderBookings(){<br/>  const list=document.getElementById(&#39;booking-list&#39;); list.innerHTML=&#39;&#39;;<br/>  bookings.forEach(b=&gt;{<br/>    const li=document.createElement(&#39;li&#39;); li.textContent=`${b.name} | ${b.flight.from} → ${b.flight.to} | المقعد: ${b.seat} | الوكيل: ${b.agent}`;<br/>    list.appendChild(li);<br/>  });<br/>}<br/>function printBookings(){<br/>  let printWindow=window.open(&#39;&#39;,&#39;&#39;,&#39;width=900,height=600&#39;);<br/>  printWindow.document.write(&#39;&lt;html&gt;&lt;head&gt;&lt;title&gt;كشف الركاب&lt;/title&gt;&lt;style&gt;body{font-family:Arial;direction:rtl;}table{border-collapse:collapse;width:100%;}th,td{border:1px solid #000;padding:8px;text-align:center;}th{background:#ddd;}&lt;/style&gt;&lt;/head&gt;&lt;body&gt;&#39;);<br/>  printWindow.document.write(&#39;&lt;h2&gt;كشف الركاب&lt;/h2&gt;&lt;table&gt;&lt;tr&gt;&lt;th&gt;المسافر&lt;/th&gt;&lt;th&gt;الرحلة&lt;/th&gt;&lt;th&gt;المقعد&lt;/th&gt;&lt;th&gt;الوكيل&lt;/th&gt;&lt;/tr&gt;&#39;);<br/>  bookings.forEach(b=&gt;{ printWindow.document.write(`&lt;tr&gt;&lt;td&gt;${b.name}&lt;/td&gt;&lt;td&gt;${b.flight.from} → ${b.flight.to}&lt;/td&gt;&lt;td&gt;${b.seat}&lt;/td&gt;&lt;td&gt;${b.agent}&lt;/td&gt;&lt;/tr&gt;`); });<br/>  printWindow.document.write(&#39;&lt;/table&gt;&lt;/